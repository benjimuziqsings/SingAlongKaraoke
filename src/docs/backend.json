
{
  "entities": {
    "SongRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SongRequest",
      "type": "object",
      "description": "Represents a song request submitted by a patron.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the song request."
        },
        "songTitle": {
          "type": "string",
          "description": "Title of the requested song."
        },
        "artistName": {
          "type": "string",
          "description": "Name of the artist for the requested song."
        },
        "singer": {
          "type": "string",
          "description": "Name of the person who requested the song."
        },
        "specialAnnouncement": {
          "type": "string",
          "description": "Optional special announcement for the song request."
        },
        "requestTime": {
          "type": "number",
          "description": "Timestamp indicating when the song request was submitted."
        },
        "patronId": {
          "type": "string",
          "description": "The UID of the authenticated patron who made the request."
        },
        "status": {
          "type": "string",
          "description": "The status of the song request such as 'queued', 'playing', 'finished', or 'removed'.",
          "enum": [
            "queued",
            "playing",
            "finished",
            "removed",
            "held"
          ]
        }
      },
      "required": [
        "id",
        "songTitle",
        "artistName",
        "requestTime",
        "singer",
        "patronId",
        "status"
      ]
    },
    "Patron": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Patron",
      "type": "object",
      "description": "Represents a patron or singer using the karaoke app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the patron."
        },
        "displayName": {
          "type": "string",
          "description": "The display name of the patron."
        },
        "name": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "telephone": {
          "type": "string",
          "description": "The patron's telephone number."
        },
        "username": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "displayName",
        "name",
        "email",
        "username"
      ]
    },
    "Tip": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tip",
      "type": "object",
      "description": "Represents a tip given by a patron to the KJ or band.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tip."
        },
        "amount": {
          "type": "number",
          "description": "The amount of the tip."
        },
        "tipTime": {
          "type": "number",
          "description": "Timestamp indicating when the tip was given."
        },
        "patronId": {
          "type": "string",
          "description": "Reference to Patron. (Relationship: Patron 1:N Tip)"
        }
      },
      "required": [
        "id",
        "amount",
        "tipTime",
        "patronId"
      ]
    },
    "Artist": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Artist",
      "type": "object",
      "description": "Represents an artist in the karaoke catalog.",
      "properties": {
        "name": {
          "type": "string"
        },
        "imageUrl": {
          "type": "string",
          "format": "uri",
          "description": "A URL pointing to an image of the artist."
        },
        "isAvailable": {
          "type": "boolean"
        }
      },
      "required": [
        "name",
        "isAvailable"
      ]
    },
    "CatalogSong": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CatalogSong",
      "type": "object",
      "description": "Represents a song within an artist's catalog.",
      "properties": {
        "title": {
          "type": "string"
        },
        "lyrics": {
          "type": "string"
        },
        "isAvailable": {
          "type": "boolean"
        }
      },
      "required": [
        "title",
        "isAvailable"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review submitted by a patron.",
      "properties": {
        "name": {
          "type": "string"
        },
        "rating": {
          "type": "number"
        },
        "comment": {
          "type": "string"
        },
        "createdAt": {
          "type": "number"
        }
      },
      "required": [
        "name",
        "rating",
        "comment",
        "createdAt"
      ]
    },
    "RequestSettings": {
      "title": "RequestSettings",
      "type": "object",
      "description": "Global settings for song requests.",
      "properties": {
        "acceptingRequests": {
          "type": "boolean",
          "description": "Whether the application is currently accepting new song requests."
        }
      },
      "required": ["acceptingRequests"]
    }
  },
  "auth": {
    "providers": [
      "email"
    ],
    "customClaims": {
      "isKJ": {
        "type": "boolean",
        "description": "Whether the user has Karaoke Jockey (admin) privileges."
      }
    }
  },
  "firestore": {
    "/patrons/{patronId}": {
      "schema": {
        "$ref": "#/entities/Patron"
      },
      "description": "Stores patron profiles. `patronId` is equal to `request.auth.uid`."
    },
    "/song_requests/{songRequestId}": {
      "schema": {
        "$ref": "#/entities/SongRequest"
      },
      "description": "A global collection of all song requests from all patrons."
    },
    "/artists/{artistId}": {
      "schema": {
        "$ref": "#/entities/Artist"
      },
      "description": "The root collection for the karaoke catalog artists."
    },
    "/artists/{artistId}/songs/{songId}": {
      "schema": {
        "$ref": "#/entities/CatalogSong"
      },
      "description": "Subcollection of songs for a specific artist."
    },
    "/reviews/{reviewId}": {
      "schema": {
        "$ref": "#/entities/Review"
      },
      "description": "A global collection for all patron reviews."
    },
    "/tips/{tipId}": {
      "schema": {
        "$ref": "#/entities/Tip"
      },
      "description": "A global collection of all tips."
    },
    "/settings/requests": {
      "schema": { "$ref": "#/entities/RequestSettings" },
      "description": "Global settings for the application, such as toggling song requests."
    }
  }
}
