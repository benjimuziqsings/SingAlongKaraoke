
{
  "entities": {
    "SongRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SongRequest",
      "type": "object",
      "description": "Represents a song request submitted by a patron.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the song request."
        },
        "songTitle": {
          "type": "string",
          "description": "Title of the requested song."
        },
        "artistName": {
          "type": "string",
          "description": "Name of the artist for the requested song."
        },
        "singer": {
          "type": "string",
          "description": "Name of the person who requested the song."
        },
        "specialAnnouncement": {
          "type": "string",
          "description": "Optional special announcement for the song request."
        },
        "requestTime": {
          "type": "number",
          "description": "Timestamp indicating when the song request was submitted."
        },
        "patronId": {
          "type": "string",
          "description": "The UID of the authenticated patron who made the request."
        },
        "status": {
          "type": "string",
          "description": "The status of the song request such as 'queued', 'playing', 'finished', or 'removed'.",
          "enum": [
            "queued",
            "playing",
            "finished",
            "removed"
          ]
        }
      },
      "required": [
        "id",
        "songTitle",
        "artistName",
        "requestTime",
        "singer",
        "patronId",
        "status"
      ]
    },
    "Patron": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Patron",
      "type": "object",
      "description": "Represents a patron or singer using the karaoke app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the patron."
        },
        "displayName": {
          "type": "string",
          "description": "The display name of the patron."
        },
        "name": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "telephone": {
          "type": "string"
        },
        "username": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "displayName",
        "name",
        "email",
        "username"
      ]
    },
    "Tip": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tip",
      "type": "object",
      "description": "Represents a tip given by a patron to the KJ or band.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tip."
        },
        "amount": {
          "type": "number",
          "description": "The amount of the tip."
        },
        "tipTime": {
          "type": "number",
          "description": "Timestamp indicating when the tip was given."
        },
        "patronId": {
          "type": "string",
          "description": "Reference to Patron. (Relationship: Patron 1:N Tip)"
        }
      },
      "required": [
        "id",
        "amount",
        "tipTime",
        "patronId"
      ]
    },
    "Artist": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Artist",
      "type": "object",
      "description": "Represents an artist in the karaoke catalog.",
      "properties": {
        "name": {
          "type": "string"
        },
        "isAvailable": {
          "type": "boolean"
        }
      },
      "required": [
        "name",
        "isAvailable"
      ]
    },
    "CatalogSong": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CatalogSong",
      "type": "object",
      "description": "Represents a song within an artist's catalog.",
      "properties": {
        "title": {
          "type": "string"
        },
        "lyrics": {
          "type": "string"
        },
        "isAvailable": {
          "type": "boolean"
        }
      },
      "required": [
        "title",
        "isAvailable"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review submitted by a patron.",
      "properties": {
        "name": {
          "type": "string"
        },
        "rating": {
          "type": "number"
        },
        "comment": {
          "type": "string"
        },
        "createdAt": {
          "type": "number"
        }
      },
      "required": [
        "name",
        "rating",
        "comment",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com",
      "facebook.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/patrons/{patronId}",
        "definition": {
          "entityName": "Patron",
          "schema": {
            "$ref": "#/backend/entities/Patron"
          },
          "description": "Stores patron profiles. `patronId` is equal to `request.auth.uid`."
        }
      },
      {
        "path": "/song_requests/{songRequestId}",
        "definition": {
          "entityName": "SongRequest",
          "schema": {
            "$ref": "#/backend/entities/SongRequest"
          },
          "description": "A global collection of all song requests from all patrons."
        }
      },
      {
        "path": "/artists/{artistId}",
        "definition": {
          "entityName": "Artist",
          "schema": {
            "$ref": "#/backend/entities/Artist"
          },
          "description": "The root collection for the karaoke catalog artists."
        }
      },
      {
        "path": "/artists/{artistId}/songs/{songId}",
        "definition": {
          "entityName": "CatalogSong",
          "schema": {
            "$ref": "#/backend/entities/CatalogSong"
          },
          "description": "Subcollection of songs for a specific artist."
        }
      },
      {
        "path": "/reviews/{reviewId}",
        "definition": {
          "entityName": "Review",
          "schema": {
            "$ref": "#/backend/entities/Review"
          },
          "description": "A global collection for all patron reviews."
        }
      },
      {
        "path": "/tips/{tipId}",
        "definition": {
            "entityName": "Tip",
            "schema": {
                "$ref": "#/backend/entities/Tip"
            },
            "description": "A global collection of all tips."
        }
      }
    ]
  }
}
